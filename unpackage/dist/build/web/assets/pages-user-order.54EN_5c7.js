import{s as e,n as t,m as s,b as a,p as r,a as o,r as l,c,w as i,i as d,o as n,d as u,e as p,q as f,u as h,F as _,t as m,g as y,j as g,S as w,h as v,aa as k,a9 as C,ab as b,x as S,f as I}from"./index-CqNzDXlw.js";import{_ as T}from"./uni-popup.DPWyVBYi.js";import{r as L}from"./uni-app.es.BltvyIiY.js";import{s as O}from"./store.DvWIVlV-.js";import{_ as P}from"./left.CpwphMH_.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D="/assets/avatar-default-Cd0nErh8.png",R="/static/empty-order.png";const q=F({computed:{userInfo:()=>O.userInfo},data:()=>({tabs:["全部","待付款","待分享","待发货","待收货","已评价","未评价"],currentTab:0,orderList:{0:[],1:[],2:[],3:[],4:[],5:[],6:[]},orderCounts:{1:0,2:0,3:0,4:0,5:0,6:0},randomGoods:[],reviewContent:"",currentOrderForReview:null,shareCountdown:5,shareTimer:null}),onLoad(e){if(e.type){const t={pending:1,share:2,shipping:3,receiving:4,review:5};this.currentTab=t[e.type]||0}this.loadOrderData(),this.getRandomGoods()},onShow(){this.loadOrderData()},onUnload(){this.shareTimer&&clearInterval(this.shareTimer)},methods:{async loadOrderData(){try{if(!this.userInfo||!this.userInfo._id)return void e({title:"请先登录",icon:"none"});const a=t.database();for(let e=1;e<=5;e++)this.orderCounts[e]=0;let r={userId:this.userInfo._id};switch(this.currentTab){case 1:r.paymentStatus=0;break;case 2:r.paymentStatus=1,r.shareStatus=0;break;case 3:r.paymentStatus=1,r.shippingStatus=0;break;case 4:r.shippingStatus=1,r.deliveryStatus=0;break;case 5:r.deliveryStatus=1,r.reviewStatus=1;break;case 6:r.deliveryStatus=1,r.reviewStatus=0}const o=await a.collection("order").where(r).orderBy("createdAt","desc").get();if(o.result.data?(this.orderList[this.currentTab]=o.result.data,3===this.currentTab&&this.orderList[this.currentTab].length>0&&this.orderList[this.currentTab].forEach((e=>{0===e.shippingStatus&&this.startAutoShipping(e)}))):this.orderList[this.currentTab]=[],0===this.currentTab){const e=await a.collection("order").where({userId:this.userInfo._id}).orderBy("createdAt","desc").get();e.result.data?this.orderList[0]=e.result.data:this.orderList[0]=[]}await this.getOrderCounts(),s("orderCounts",this.orderCounts)}catch(a){console.error("加载订单数据失败:",a),e({title:"加载订单数据失败",icon:"none"})}},async getOrderCounts(){try{const e=t.database(),s=[e.collection("order").where({userId:this.userInfo._id,paymentStatus:0}).count(),e.collection("order").where({userId:this.userInfo._id,paymentStatus:1,shareStatus:0}).count(),e.collection("order").where({userId:this.userInfo._id,paymentStatus:1,shippingStatus:0}).count(),e.collection("order").where({userId:this.userInfo._id,shippingStatus:1,deliveryStatus:0}).count(),e.collection("order").where({userId:this.userInfo._id,deliveryStatus:1,reviewStatus:1}).count(),e.collection("order").where({userId:this.userInfo._id,deliveryStatus:1,reviewStatus:0}).count()],a=await Promise.all(s);for(let t=0;t<a.length;t++)this.orderCounts[t+1]=a[t].result.total}catch(e){console.error("获取订单数量失败:",e)}},async getRandomGoods(){try{const{result:e}=await t.database().collection("mall-goods").limit(8).get();this.randomGoods=this.shuffleArray(e.data||[])}catch(e){console.error("获取商品数据失败:",e)}},shuffleArray(e){if(!Array.isArray(e))return[];const t=[...e];for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}return t},getOrderStatus:e=>0===e.paymentStatus?"待付款":1===e.paymentStatus&&0===e.shareStatus?"待分享":1===e.paymentStatus&&0===e.shippingStatus?"待发货":1===e.shippingStatus&&0===e.deliveryStatus?"待收货":1===e.deliveryStatus&&0===e.reviewStatus?"未评价":"已完成",switchTab(e){this.currentTab=e,this.loadOrderData(),console.log(`切换到选项卡 ${e}，数据:`,this.orderList[e])},handleSwiperChange(e){this.currentTab=e.detail.current,this.loadOrderData(),console.log(`切换到选项卡 ${this.currentTab}，数据:`,this.orderList[this.currentTab])},async goToPay(e){var t;const r={amount:e.amount,userId:this.userInfo._id,username:this.userInfo.username,mobile:this.userInfo.mobile,avatar:(null==(t=this.userInfo.avatar_file)?void 0:t.path)||"/static/avatar-default.png",productId:e.productId,productName:e.productName,productImage:e.productImage,quantity:e.quantity};s("paymentData",r),s("currentOrderIds",[e._id]),a({url:"/pages/wallet/pay"})},async cancelOrder(s){try{const a=t.database();await a.collection("order").doc(s._id).update({paymentStatus:2}),e({title:"订单已取消",icon:"success"}),this.loadOrderData()}catch(a){console.error("取消订单失败:",a),e({title:"取消订单失败",icon:"none"})}},shareOrderWithDelay(e){this.shareCountdown=3,this.$refs.sharePopup.open(),this.shareTimer=setInterval((()=>{this.shareCountdown--,this.shareCountdown<=0&&(clearInterval(this.shareTimer),this.$refs.sharePopup.close(),this.shareOrder(e))}),1e3)},async shareOrder(s){try{const a=t.database();await a.collection("order").doc(s._id).update({shareStatus:1}),e({title:"分享成功",icon:"success"}),this.loadOrderData(),setTimeout((async()=>{try{await a.collection("order").doc(s._id).update({shippingStatus:1}),console.log("订单自动发货成功:",s._id),this.loadOrderData()}catch(e){console.error("自动发货失败:",e)}}),3e3)}catch(a){console.error("分享订单失败:",a),e({title:"分享失败",icon:"none"})}},async confirmReceipt(s){try{const e=t.database();await e.collection("order").doc(s._id).update({deliveryStatus:1,reviewStatus:0}),this.showReviewPopup(s),this.loadOrderData()}catch(a){console.error("确认收货失败:",a),e({title:"确认收货失败",icon:"none"})}},showReviewPopup(t){this.currentOrderForReview=t,this.reviewContent="",this.$refs.reviewPopup?this.$refs.reviewPopup.open():(console.error("评价弹窗组件不存在"),e({title:"评价功能暂时不可用",icon:"none"}))},hideReviewPopup(){this.$refs.reviewPopup&&this.$refs.reviewPopup.close(),this.currentOrderForReview=null,this.reviewContent=""},async submitReview(){if(this.reviewContent.trim())try{const s=t.database(),a=(new Date).getTime();await s.collection("order").doc(this.currentOrderForReview._id).update({review:this.reviewContent,reviewStatus:1,updatedAt:a});let r=this.currentOrderForReview.productId;console.log("商品id",r),Array.isArray(r)&&(r=r[0]);const o=await s.collection("mall-goods").doc(r).get();if(console.log("已经存在的商品数据",o),!o.result.data)throw new Error("商品不存在");let l=o.result.data[0].reviews||[];console.log("已经存在的商品的评论数据",l),l=[...l,this.reviewContent],console.log("更新后的的商品的评论数据",l),await s.collection("mall-goods").doc(r).update({reviews:l});const c=await s.collection("mall-goods").doc(r).get();console.log("更新后的商品数据:",c),e({title:"评价成功",icon:"success"}),this.hideReviewPopup(),this.loadOrderData()}catch(s){console.error("提交评价失败:",s),e({title:"提交评价失败: "+(s.message||"请重试"),icon:"none"})}else e({title:"请输入评价内容",icon:"none"})},calculateAverageRating(e){if(!e||0===e.length)return 5;const t=e.reduce(((e,t)=>e+(t.rating||5)),0);return Math.round(t/e.length*10)/10},navigateToProduct(e){e&&r({key:"currentProduct",data:e,success:()=>{a({url:"../search/mall-details"})}})},navigateBack(){o({url:"/pages/user/user"})},handleScroll(){},startAutoShipping(e){setTimeout((async()=>{try{const s=t.database();await s.collection("order").doc(e._id).update({shippingStatus:1}),console.log("订单自动发货成功:",e._id),this.loadOrderData()}catch(s){console.error("自动发货失败:",s)}}),5e3)},navigateToProductDetails(s){if(!s)return void e({title:"商品信息不完整",icon:"none"});console.log("跳转商品详情页的商品id",s);let o=s;"object"==typeof s&&s[0]&&(o=s[0]);t.database().collection("mall-goods").doc(o).get().then((t=>{if(t.result.data){console.log("跳转商品详情页的商品数据",t.result.data);const e=Array.isArray(t.result.data)?t.result.data[0]:t.result.data;r({key:"currentProduct",data:e,success:()=>{a({url:"../search/mall-details"})}})}else e({title:"商品不存在或已下架",icon:"none"})})).catch((t=>{console.error("获取商品详情失败:",t),e({title:"获取商品详情失败",icon:"none"})}))}}},[["render",function(e,t,s,a,r,o){const O=d,F=y,q=g,x=w,A=v,N=k,j=C,$=b,B=L(l("uni-popup"),T);return n(),c(O,{class:"container"},{default:i((()=>[u(O,{class:"fixed-header"},{default:i((()=>[u(O,{class:"status-bar"}),u(O,{class:"nav-header"},{default:i((()=>[u(O,{class:"back-icon",onClick:o.navigateBack},{default:i((()=>[u(F,{src:P,class:"icon-back"})])),_:1},8,["onClick"]),u(q,{class:"page-title"},{default:i((()=>[p("我的订单")])),_:1})])),_:1}),u(x,{"scroll-x":"true",class:"tab-scroll","scroll-into-view":"tab"+r.currentTab,"scroll-with-animation":!0,onScroll:o.handleScroll},{default:i((()=>[u(O,{class:"tabs"},{default:i((()=>[(n(!0),f(_,null,h(r.tabs,((e,t)=>(n(),c(O,{key:t,id:"tab"+t,class:S(["tab-item",{active:r.currentTab===t}]),onClick:e=>o.switchTab(t)},{default:i((()=>[p(m(e)+" ",1),r.currentTab===t?(n(),c(O,{key:0,class:"tab-line"})):I("",!0)])),_:2},1032,["id","class","onClick"])))),128))])),_:1})])),_:1},8,["scroll-into-view","onScroll"])])),_:1}),u(j,{class:"swiper-content",current:r.currentTab,onChange:o.handleSwiperChange},{default:i((()=>[u(N,null,{default:i((()=>[u(x,{"scroll-y":"true",class:"order-list"},{default:i((()=>[u(O,{class:"orders-section"},{default:i((()=>[r.orderList[0]&&r.orderList[0].length>0?(n(!0),f(_,{key:0},h(r.orderList[0],((e,t)=>(n(),c(O,{key:t,class:"order-item"},{default:i((()=>[u(O,{class:"store-info"},{default:i((()=>[u(F,{class:"store-icon",src:D,mode:"aspectFit"}),u(q,{class:"store-name"},{default:i((()=>[p("拼多多官方旗舰店")])),_:1}),u(q,{class:"order-status"},{default:i((()=>[p(m(o.getOrderStatus(e)),1)])),_:2},1024)])),_:2},1024),u(O,{class:"product-info"},{default:i((()=>[u(O,{class:"product-details"},{default:i((()=>[u(F,{src:e.productImage,onClick:t=>o.navigateToProductDetails(e.productId),mode:"aspectFill",class:"product-image"},null,8,["src","onClick"]),u(q,{class:"product-name"},{default:i((()=>[p(m(e.productName),1)])),_:2},1024),u(q,{class:"product-desc"},{default:i((()=>[p(m(e.description),1)])),_:2},1024),u(O,{class:"price-info"},{default:i((()=>[u(q,{class:"quantity"},{default:i((()=>[p("x"+m(e.quantity),1)])),_:2},1024),u(q,{class:"price"},{default:i((()=>[p("¥"+m(e.amount),1)])),_:2},1024)])),_:2},1024),u(O,{class:"order-actions"},{default:i((()=>[0===e.paymentStatus?(n(),f(_,{key:0},[u(A,{class:"action-btn cancel",onClick:t=>o.cancelOrder(e)},{default:i((()=>[p("取消订单")])),_:2},1032,["onClick"]),u(A,{class:"action-btn primary",onClick:t=>o.goToPay(e)},{default:i((()=>[p("去支付")])),_:2},1032,["onClick"])],64)):1===e.paymentStatus&&0===e.shareStatus?(n(),f(_,{key:1},[u(A,{class:"action-btn cancel",onClick:t=>o.cancelOrder(e)},{default:i((()=>[p("取消订单")])),_:2},1032,["onClick"]),u(A,{class:"action-btn primary",onClick:t=>o.shareOrderWithDelay(e)},{default:i((()=>[p("去分享")])),_:2},1032,["onClick"])],64)):1===e.shippingStatus&&0===e.deliveryStatus?(n(),c(A,{key:2,class:"action-btn primary",onClick:t=>o.confirmReceipt(e)},{default:i((()=>[p("确认收货")])),_:2},1032,["onClick"])):1===e.deliveryStatus&&0===e.reviewStatus?(n(),c(A,{key:3,class:"action-btn primary",onClick:t=>o.showReviewPopup(e)},{default:i((()=>[p("去评价")])),_:2},1032,["onClick"])):I("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(n(),c(O,{key:1,class:"empty-state"},{default:i((()=>[u(F,{src:R,mode:"aspectFit",class:"empty-icon"}),u(q,null,{default:i((()=>[p("您还没有相关的订单")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),u(N,null,{default:i((()=>[u(x,{"scroll-y":"true",class:"order-list"},{default:i((()=>[u(O,{class:"orders-section"},{default:i((()=>[r.orderList[1]&&r.orderList[1].length>0?(n(!0),f(_,{key:0},h(r.orderList[1],((e,t)=>(n(),c(O,{key:t,class:"order-item"},{default:i((()=>[u(O,{class:"store-info"},{default:i((()=>[u(F,{class:"store-icon",src:D,mode:"aspectFit"}),u(q,{class:"store-name"},{default:i((()=>[p("拼多多官方旗舰店")])),_:1}),u(q,{class:"order-status"},{default:i((()=>[p("待付款")])),_:1})])),_:1}),u(O,{class:"product-info"},{default:i((()=>[u(O,{class:"product-details"},{default:i((()=>[u(F,{src:e.productImage,onClick:t=>o.navigateToProductDetails(e.productId),mode:"aspectFill",class:"product-image"},null,8,["src","onClick"]),u(q,{class:"product-name"},{default:i((()=>[p(m(e.productName),1)])),_:2},1024),u(q,{class:"product-desc"},{default:i((()=>[p(m(e.description),1)])),_:2},1024),u(O,{class:"price-info"},{default:i((()=>[u(q,{class:"quantity"},{default:i((()=>[p("x"+m(e.quantity),1)])),_:2},1024),u(q,{class:"price"},{default:i((()=>[p("¥"+m(e.amount),1)])),_:2},1024)])),_:2},1024),u(O,{class:"order-actions"},{default:i((()=>[u(A,{class:"action-btn cancel",onClick:t=>o.cancelOrder(e)},{default:i((()=>[p("取消订单")])),_:2},1032,["onClick"]),u(A,{class:"action-btn primary",onClick:t=>o.goToPay(e)},{default:i((()=>[p("去支付")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(n(),c(O,{key:1,class:"empty-state"},{default:i((()=>[u(F,{src:R,mode:"aspectFit",class:"empty-icon"}),u(q,null,{default:i((()=>[p("您还没有待付款的订单")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),u(N,null,{default:i((()=>[u(x,{"scroll-y":"true",class:"order-list"},{default:i((()=>[u(O,{class:"orders-section"},{default:i((()=>[r.orderList[2]&&r.orderList[2].length>0?(n(!0),f(_,{key:0},h(r.orderList[2],((e,t)=>(n(),c(O,{key:t,class:"order-item"},{default:i((()=>[u(O,{class:"store-info"},{default:i((()=>[u(F,{class:"store-icon",src:D,mode:"aspectFit"}),u(q,{class:"store-name"},{default:i((()=>[p("拼多多官方旗舰店")])),_:1}),u(q,{class:"order-status"},{default:i((()=>[p("待分享")])),_:1})])),_:1}),u(O,{class:"product-info"},{default:i((()=>[u(O,{class:"product-details"},{default:i((()=>[u(F,{src:e.productImage,onClick:t=>o.navigateToProductDetails(e.productId),mode:"aspectFill",class:"product-image"},null,8,["src","onClick"]),u(q,{class:"product-name"},{default:i((()=>[p(m(e.productName),1)])),_:2},1024),u(q,{class:"product-desc"},{default:i((()=>[p(m(e.description),1)])),_:2},1024),u(O,{class:"price-info"},{default:i((()=>[u(q,{class:"quantity"},{default:i((()=>[p("x"+m(e.quantity),1)])),_:2},1024),u(q,{class:"price"},{default:i((()=>[p("¥"+m(e.amount),1)])),_:2},1024)])),_:2},1024),u(O,{class:"order-actions"},{default:i((()=>[u(A,{class:"action-btn cancel",onClick:t=>o.cancelOrder(e)},{default:i((()=>[p("取消订单")])),_:2},1032,["onClick"]),u(A,{class:"action-btn primary",onClick:t=>o.shareOrderWithDelay(e)},{default:i((()=>[p("去分享")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(n(),c(O,{key:1,class:"empty-state"},{default:i((()=>[u(F,{src:R,mode:"aspectFit",class:"empty-icon"}),u(q,null,{default:i((()=>[p("您还没有待分享的订单")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),u(N,null,{default:i((()=>[u(x,{"scroll-y":"true",class:"order-list"},{default:i((()=>[u(O,{class:"orders-section"},{default:i((()=>[r.orderList[3]&&r.orderList[3].length>0?(n(!0),f(_,{key:0},h(r.orderList[3],((e,t)=>(n(),c(O,{key:t,class:"order-item"},{default:i((()=>[u(O,{class:"store-info"},{default:i((()=>[u(F,{class:"store-icon",src:D,mode:"aspectFit"}),u(q,{class:"store-name"},{default:i((()=>[p("拼多多官方旗舰店")])),_:1}),u(q,{class:"order-status"},{default:i((()=>[p("待发货")])),_:1})])),_:1}),u(O,{class:"product-info"},{default:i((()=>[u(O,{class:"product-details"},{default:i((()=>[u(F,{src:e.productImage,onClick:t=>o.navigateToProductDetails(e.productId),mode:"aspectFill",class:"product-image"},null,8,["src","onClick"]),u(q,{class:"product-name"},{default:i((()=>[p(m(e.productName),1)])),_:2},1024),u(q,{class:"product-desc"},{default:i((()=>[p(m(e.description),1)])),_:2},1024),u(O,{class:"price-info"},{default:i((()=>[u(q,{class:"quantity"},{default:i((()=>[p("x"+m(e.quantity),1)])),_:2},1024),u(q,{class:"price"},{default:i((()=>[p("¥"+m(e.amount),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(n(),c(O,{key:1,class:"empty-state"},{default:i((()=>[u(F,{src:R,mode:"aspectFit",class:"empty-icon"}),u(q,null,{default:i((()=>[p("您还没有待发货的订单")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),u(N,null,{default:i((()=>[u(x,{"scroll-y":"true",class:"order-list"},{default:i((()=>[u(O,{class:"orders-section"},{default:i((()=>[r.orderList[4]&&r.orderList[4].length>0?(n(!0),f(_,{key:0},h(r.orderList[4],((e,t)=>(n(),c(O,{key:t,class:"order-item"},{default:i((()=>[u(O,{class:"store-info"},{default:i((()=>[u(F,{class:"store-icon",src:D,mode:"aspectFit"}),u(q,{class:"store-name"},{default:i((()=>[p("拼多多官方旗舰店")])),_:1}),u(q,{class:"order-status"},{default:i((()=>[p("待收货")])),_:1})])),_:1}),u(O,{class:"product-info"},{default:i((()=>[u(O,{class:"product-details"},{default:i((()=>[u(F,{src:e.productImage,mode:"aspectFill",class:"product-image",onClick:t=>o.navigateToProductDetails(e.productId)},null,8,["src","onClick"]),u(q,{class:"product-name"},{default:i((()=>[p(m(e.productName),1)])),_:2},1024),u(q,{class:"product-desc"},{default:i((()=>[p(m(e.description),1)])),_:2},1024),u(O,{class:"price-info"},{default:i((()=>[u(q,{class:"quantity"},{default:i((()=>[p("x"+m(e.quantity),1)])),_:2},1024),u(q,{class:"price"},{default:i((()=>[p("¥"+m(e.amount),1)])),_:2},1024)])),_:2},1024),u(O,{class:"order-actions"},{default:i((()=>[u(A,{class:"action-btn primary",onClick:t=>o.confirmReceipt(e)},{default:i((()=>[p("确认收货")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(n(),c(O,{key:1,class:"empty-state"},{default:i((()=>[u(F,{src:R,mode:"aspectFit",class:"empty-icon"}),u(q,null,{default:i((()=>[p("您还没有待收货的订单")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),u(N,null,{default:i((()=>[u(x,{"scroll-y":"true",class:"order-list"},{default:i((()=>[u(O,{class:"orders-section"},{default:i((()=>[r.orderList[5]&&r.orderList[5].length>0?(n(!0),f(_,{key:0},h(r.orderList[5],((e,t)=>(n(),c(O,{key:t,class:"order-item"},{default:i((()=>[u(O,{class:"store-info"},{default:i((()=>[u(F,{class:"store-icon",src:D,mode:"aspectFit"}),u(q,{class:"store-name"},{default:i((()=>[p("拼多多官方旗舰店")])),_:1}),u(q,{class:"order-status"},{default:i((()=>[p("已评价")])),_:1})])),_:1}),u(O,{class:"product-info"},{default:i((()=>[u(O,{class:"product-details"},{default:i((()=>[u(F,{src:e.productImage,onClick:t=>o.navigateToProductDetails(e.productId),mode:"aspectFill",class:"product-image"},null,8,["src","onClick"]),u(q,{class:"product-name"},{default:i((()=>[p(m(e.productName),1)])),_:2},1024),u(O,{class:"price-info"},{default:i((()=>[u(q,{class:"quantity"},{default:i((()=>[p("x"+m(e.quantity),1)])),_:2},1024),u(q,{class:"price"},{default:i((()=>[p("¥"+m(e.amount),1)])),_:2},1024)])),_:2},1024),u(O,{class:"review-content"},{default:i((()=>[u(q,{class:"review-label"},{default:i((()=>[p("我的评价：")])),_:1}),u(q,{class:"review-text"},{default:i((()=>[p(m(e.review),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(n(),c(O,{key:1,class:"empty-state"},{default:i((()=>[u(F,{src:R,mode:"aspectFit",class:"empty-icon"}),u(q,null,{default:i((()=>[p("您还没有已评价的订单")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),u(N,null,{default:i((()=>[u(x,{"scroll-y":"true",class:"order-list"},{default:i((()=>[u(O,{class:"orders-section"},{default:i((()=>[r.orderList[6]&&r.orderList[6].length>0?(n(!0),f(_,{key:0},h(r.orderList[6],((e,t)=>(n(),c(O,{key:t,class:"order-item"},{default:i((()=>[u(O,{class:"store-info"},{default:i((()=>[u(F,{class:"store-icon",src:D,mode:"aspectFit"}),u(q,{class:"store-name"},{default:i((()=>[p("拼多多官方旗舰店")])),_:1}),u(q,{class:"order-status"},{default:i((()=>[p("未评价")])),_:1})])),_:1}),u(O,{class:"product-info"},{default:i((()=>[u(O,{class:"product-details"},{default:i((()=>[u(F,{src:e.productImage,onClick:t=>o.navigateToProductDetails(e.productId),mode:"aspectFill",class:"product-image"},null,8,["src","onClick"]),u(q,{class:"product-name"},{default:i((()=>[p(m(e.productName),1)])),_:2},1024),u(q,{class:"product-desc"},{default:i((()=>[p(m(e.description),1)])),_:2},1024),u(O,{class:"price-info"},{default:i((()=>[u(q,{class:"quantity"},{default:i((()=>[p("x"+m(e.quantity),1)])),_:2},1024),u(q,{class:"price"},{default:i((()=>[p("¥"+m(e.amount),1)])),_:2},1024)])),_:2},1024),u(O,{class:"order-actions"},{default:i((()=>[u(A,{class:"action-btn primary",onClick:t=>o.showReviewPopup(e)},{default:i((()=>[p("去评价")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(n(),c(O,{key:1,class:"empty-state"},{default:i((()=>[u(F,{src:R,mode:"aspectFit",class:"empty-icon"}),u(q,null,{default:i((()=>[p("您没有未评价的订单")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["current","onChange"]),u(B,{ref:"reviewPopup",type:"bottom"},{default:i((()=>[u(O,{class:"review-popup"},{default:i((()=>[u(O,{class:"popup-header"},{default:i((()=>[u(F,{src:P,class:"icon-back-popup",onClick:o.hideReviewPopup},null,8,["onClick"]),u(q,{class:"popup-title"},{default:i((()=>[p("商品评价")])),_:1})])),_:1}),u(O,{class:"review-content-popup"},{default:i((()=>[u($,{modelValue:r.reviewContent,"onUpdate:modelValue":t[0]||(t[0]=e=>r.reviewContent=e),placeholder:"请输入您的评价内容",class:"review-textarea"},null,8,["modelValue"]),u(A,{class:"submit-review",onClick:o.submitReview},{default:i((()=>[p("提交评价")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},512),u(B,{ref:"sharePopup",type:"center"},{default:i((()=>[u(O,{class:"share-popup"},{default:i((()=>[u(O,{class:"share-popup-content"},{default:i((()=>[u(q,{class:"share-popup-title"},{default:i((()=>[p("分享成功")])),_:1}),u(q,{class:"share-popup-text"},{default:i((()=>[p("3秒后将自动为您发货")])),_:1}),u(q,{class:"share-popup-countdown"},{default:i((()=>[p(m(r.shareCountdown)+"s",1)])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})}],["__scopeId","data-v-91efe883"]]);export{q as default};
