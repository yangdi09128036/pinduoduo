import{r as t,o,c as i,w as e,x as n,v as s,d as l,f as a,q as r,F as c,u as h,e as u,t as f,i as d,g as _,j as m,n as b,ax as p,b as g}from"./index-CDX771vS.js";import{_ as y,a as k}from"./uni-list.BioAR-uY.js";import{r as C}from"./uni-app.es.i-bVV8oK.js";import{_ as v}from"./uni-load-more.CvNHBxiU.js";import{_ as w}from"./unicloud-db.BuyzoJvc.js";import{_ as x}from"./uni-icons.D1MAE8uI.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";const B=S({name:"UniFab",emits:["fabClick","trigger"],props:{pattern:{type:Object,default:()=>({})},horizontal:{type:String,default:"left"},vertical:{type:String,default:"bottom"},direction:{type:String,default:"horizontal"},content:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},popMenu:{type:Boolean,default:!0}},data:()=>({fabShow:!1,isShow:!1,isAndroidNvue:!1,styles:{color:"#3c3e49",selectedColor:"#007AFF",backgroundColor:"#fff",buttonColor:"#007AFF",iconColor:"#fff",icon:"plusempty"}}),computed:{contentWidth(t){return 55*(this.content.length+1)+15+"px"},contentWidthMin:()=>"55px",boxWidth(){return this.getPosition(3,"horizontal")},boxHeight(){return this.getPosition(3,"vertical")},leftBottom(){return this.getPosition(0,"left","bottom")},rightBottom(){return this.getPosition(0,"right","bottom")},leftTop(){return this.getPosition(0,"left","top")},rightTop(){return this.getPosition(0,"right","top")},flexDirectionStart(){return this.getPosition(1,"vertical","top")},flexDirectionEnd(){return this.getPosition(1,"vertical","bottom")},horizontalLeft(){return this.getPosition(2,"horizontal","left")},horizontalRight(){return this.getPosition(2,"horizontal","right")},nvueBottom:()=>30},watch:{pattern:{handler(t,o){this.styles=Object.assign({},this.styles,t)},deep:!0}},created(){this.isShow=this.show,0===this.top&&(this.fabShow=!0),this.styles=Object.assign({},this.styles,this.pattern)},methods:{_onClick(){this.$emit("fabClick"),this.popMenu&&(this.isShow=!this.isShow)},open(){this.isShow=!0},close(){this.isShow=!1},_onItemClick(t,o){this.isShow&&this.$emit("trigger",{index:t,item:o})},getPosition(t,o,i){return 0===t?this.horizontal===o&&this.vertical===i:1===t?this.direction===o&&this.vertical===i:2===t?this.direction===o&&this.horizontal===i:this.isShow&&this.direction===o?this.contentWidth:this.contentWidthMin}}},[["render",function(b,p,g,y,k,v){const w=d,S=_,B=m,z=C(t("uni-icons"),x);return o(),i(w,{class:"uni-cursor-point"},{default:e((()=>[g.popMenu&&(v.leftBottom||v.rightBottom||v.leftTop||v.rightTop)&&g.content.length>0?(o(),i(w,{key:0,class:n([{"uni-fab--leftBottom":v.leftBottom,"uni-fab--rightBottom":v.rightBottom,"uni-fab--leftTop":v.leftTop,"uni-fab--rightTop":v.rightTop},"uni-fab"]),style:s(v.nvueBottom)},{default:e((()=>[l(w,{class:n([{"uni-fab__content--left":"left"===g.horizontal,"uni-fab__content--right":"right"===g.horizontal,"uni-fab__content--flexDirection":"vertical"===g.direction,"uni-fab__content--flexDirectionStart":v.flexDirectionStart,"uni-fab__content--flexDirectionEnd":v.flexDirectionEnd,"uni-fab__content--other-platform":!k.isAndroidNvue},"uni-fab__content"]),style:s({width:v.boxWidth,height:v.boxHeight,backgroundColor:k.styles.backgroundColor}),elevation:"5"},{default:e((()=>[v.flexDirectionStart||v.horizontalLeft?(o(),i(w,{key:0,class:"uni-fab__item uni-fab__item--first"})):a("",!0),(o(!0),r(c,null,h(g.content,((t,a)=>(o(),i(w,{key:a,class:n([{"uni-fab__item--active":k.isShow},"uni-fab__item"]),onClick:o=>v._onItemClick(a,t)},{default:e((()=>[l(S,{src:t.active?t.selectedIconPath:t.iconPath,class:"uni-fab__item-image",mode:"aspectFit"},null,8,["src"]),l(B,{class:"uni-fab__item-text",style:s({color:t.active?k.styles.selectedColor:k.styles.color})},{default:e((()=>[u(f(t.text),1)])),_:2},1032,["style"])])),_:2},1032,["class","onClick"])))),128)),v.flexDirectionEnd||v.horizontalRight?(o(),i(w,{key:1,class:"uni-fab__item uni-fab__item--first"})):a("",!0)])),_:1},8,["class","style"])])),_:1},8,["class","style"])):a("",!0),l(w,{class:n([{"uni-fab__circle--leftBottom":v.leftBottom,"uni-fab__circle--rightBottom":v.rightBottom,"uni-fab__circle--leftTop":v.leftTop,"uni-fab__circle--rightTop":v.rightTop,"uni-fab__content--other-platform":!k.isAndroidNvue},"uni-fab__circle uni-fab__plus"]),style:s({"background-color":k.styles.buttonColor,bottom:v.nvueBottom}),onClick:v._onClick},{default:e((()=>[l(z,{class:n(["fab-circle-icon",{"uni-fab__plus--active":k.isShow&&g.content.length>0}]),type:k.styles.icon,color:k.styles.iconColor,size:"32"},null,8,["type","color","class"])])),_:1},8,["class","style","onClick"])])),_:1})}],["__scopeId","data-v-b5a7ca4a"]]);b.database();const z=S({data:()=>({collectionList:"mall-goods",loadMore:{contentdown:"",contentrefresh:"",contentnomore:""}}),onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{p()}))},onReachBottom(){this.$refs.udb.loadMore()},methods:{handleItemClick(t){g({url:"./detail?id="+t})},fabClick(){g({url:"./add",events:{refreshData:()=>{this.$refs.udb.loadData({clear:!0})}}})}}},[["render",function(n,s,_,b,p,g){const x=d,S=m,z=C(t("uni-list-item"),y),D=C(t("uni-list"),k),P=C(t("uni-load-more"),v),T=C(t("unicloud-db"),w),j=C(t("uni-fab"),B);return o(),i(x,{class:"container"},{default:e((()=>[l(T,{ref:"udb",collection:p.collectionList,field:"category_id,goods_sn,name,price,keywords,goods_desc,goods_thumb,goods_banner_imgs,reviews,remain_count,month_sell_count,total_sell_count,is_real,is_on_sale,is_best,is_new,is_hot,seller_note"},{default:e((({data:t,pagination:n,loading:s,hasMore:d,error:_})=>[_?(o(),i(x,{key:0},{default:e((()=>[u(f(_.message),1)])),_:2},1024)):t?(o(),i(x,{key:1},{default:e((()=>[l(D,null,{default:e((()=>[(o(!0),r(c,null,h(t,((t,n)=>(o(),i(z,{key:n,showArrow:"",clickable:!0,onClick:o=>g.handleItemClick(t._id)},{body:e((()=>[l(S,null,{default:e((()=>[u(f(t._id),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)):a("",!0),l(P,{status:s?"loading":d?"more":"noMore"},null,8,["status"])])),_:1},8,["collection"]),l(j,{ref:"fab",horizontal:"right",vertical:"bottom","pop-menu":!1,onFabClick:g.fabClick},null,8,["onFabClick"])])),_:1})}]]);export{z as default};
