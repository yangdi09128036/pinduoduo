import{n as s,s as e,y as o,z as a,b as r,r as t,c as i,w as u,i as n,o as l,d as m,e as d,g as p,h as c}from"./index-CqNzDXlw.js";import{_ as f}from"./uni-easyinput.DZGwi5AW.js";import{r as g}from"./uni-app.es.BltvyIiY.js";import{_ as h}from"./uni-forms-item.BzQuaNCo.js";import{_ as w}from"./uni-forms.CRnPwZm3.js";import{r as _}from"./validator.C9ETMcLc.js";import{m as b}from"./login-page.mixin.Cr0_R5ld.js";import"./store.DvWIVlV-.js";import{_ as y}from"./logo.VQCJtlH9.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.EE9020IA.js";import"./password.h-YGLMOF.js";const k=s.importObject("uni-id-co");const v=j({mixins:[b],data:()=>({formData:{username:"",password:"",password2:""},rules:_,focusUsername:!1,focusPassword:!1,focusPassword2:!1,logo:"/static/logo.png"}),onReady(){this.$refs.form.setRules(this.rules)},onShow(){document.onkeydown=s=>{var e=s||window.event;e&&13==e.keyCode&&this.submit()}},methods:{submit(){this.$refs.form.validate().then((s=>{if(this.needAgreements&&!this.agree)return this.$refs.agreements.popup((()=>{this.submitForm(s)}));this.submitForm(s)})).catch((s=>{let e=s[0].key;e=e.replace(e[0],e[0].toUpperCase()),this["focus"+e]=!0}))},submitForm(s){k.registerUser(this.formData).then((s=>{this.loginSuccess(s),e({title:"注册成功",icon:"success",duration:2e3}),setTimeout((()=>{o({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})}),2e3)})).catch((s=>{console.error("注册失败：",s);let o="注册失败，请重试";s.msg&&(o=s.msg),e({title:o,icon:"none",duration:3e3})}))},navigateBack(){a()},toLogin(){r({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})},registerByEmail(){r({url:"/uni_modules/uni-id-pages/pages/register/register-by-email"})}}},[["render",function(s,e,o,a,r,_){const b=p,j=n,k=g(t("uni-easyinput"),f),v=g(t("uni-forms-item"),h),x=c,D=g(t("uni-forms"),w);return l(),i(j,{class:"login-container"},{default:u((()=>[m(j,{class:"login-content"},{default:u((()=>[m(j,{class:"login-logo"},{default:u((()=>[m(b,{src:y,mode:"widthFix",class:"logo-image"})])),_:1}),m(D,{class:"form-container",ref:"form",value:r.formData,rules:r.rules,"validate-trigger":"submit","err-show-type":"toast"},{default:u((()=>[m(v,{name:"username",required:""},{default:u((()=>[m(k,{focus:r.focusUsername,onBlur:e[0]||(e[0]=s=>r.focusUsername=!1),class:"input-box username-input",inputBorder:!1,placeholder:"请输入用户名",modelValue:r.formData.username,"onUpdate:modelValue":e[1]||(e[1]=s=>r.formData.username=s),trim:"both"},null,8,["focus","modelValue"])])),_:1}),m(v,{name:"password",required:""},{default:u((()=>[m(k,{focus:r.focusPassword,onBlur:e[2]||(e[2]=s=>r.focusPassword=!1),class:"input-box password-input",maxlength:"20",placeholder:"请输入"+("weak"==s.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:r.formData.password,"onUpdate:modelValue":e[3]||(e[3]=s=>r.formData.password=s),trim:"both"},null,8,["focus","placeholder","modelValue"])])),_:1}),m(v,{name:"password2",required:""},{default:u((()=>[m(k,{focus:r.focusPassword2,onBlur:e[4]||(e[4]=s=>r.focusPassword2=!1),class:"input-box password-input",maxlength:"20",placeholder:"再次输入密码",type:"password",modelValue:r.formData.password2,"onUpdate:modelValue":e[5]||(e[5]=s=>r.formData.password2=s),trim:"both"},null,8,["focus","modelValue"])])),_:1}),m(x,{class:"login-button",type:"primary",onClick:_.submit},{default:u((()=>[d("注册")])),_:1},8,["onClick"]),m(x,{class:"register-back",onClick:_.navigateBack},{default:u((()=>[d("返回")])),_:1},8,["onClick"])])),_:1},8,["value","rules"])])),_:1})])),_:1})}],["__scopeId","data-v-a274e33c"]]);export{v as default};
